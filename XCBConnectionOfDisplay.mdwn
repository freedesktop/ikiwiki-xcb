# XCBConnectionOfDisplay

## Function Prototype

    XCBConnection *XCBConnectionOfDisplay(Display *dpy);

## Example

    #include <X11/xcl.h>
    #include <stdlib.h>
    #include <stdio.h>

    int main()
    {
        Display *dpy = XOpenDisplay(NULL);
        XCBConnection *c;
        XCBSCREEN *screen;
        XCBWINDOW window;

        const int depth = 0, x = 0, y = 0, width = 150, height = 150,
                  border_width = 1;

        if (! dpy)
        {
            fprintf(stderr, "Could not open display.\n");
            exit(EXIT_FAILURE);
        }

        /* Now that we have an open Display object, cast it to an
         * XCBConnection object so it can be used with native XCB
         * functions.
         */
        c = XCBConnectionOfDisplay(dpy);

        if (! c)
        {
            fprintf(stderr, "Could not cast the Display object to an "
                            "XCBConnection object.\n");
            exit(EXIT_FAILURE);
        }

        /* Do something meaningful, fun, and interesting with the new
         * XCBConnection object.
         */
        window = XCBWINDOWNew(c);
        screen = XCBConnSetupSuccessRepRootsIter(XCBGetSetup(c)).data;

        XCBCreateWindow(c, depth, window, screen->root, x, y, width, height,
                        border_width, InputOutput, screen->root_visual, 0, NULL);
        XCBMapWindow(c, window);
        XCBSync(c, 0);

        for (;;) /* Loop forever */ ;

        return EXIT_SUCCESS;
    }
